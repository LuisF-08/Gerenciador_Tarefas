{% extends 'base.html' %}

{% block conteudo %}

<style>
.modal-backdrop.show {
    backdrop-filter: blur(6px);
    opacity: 0.85;
}
</style>

<!-- BLOCO INFORMATIVO -->
<div class="row mb-5">
    <div class="col-12">
        <div class="p-5 bg-light rounded-3 shadow-sm border">
            <h1 class="display-5 fw-bold text-primary">Sobre este Sistema</h1>
            <p class="col-md-8 fs-4 text-muted">
                Sistema de gerenciamento de tarefas para organizar, criar,
                atualizar e controlar suas atividades diárias.
            </p>

            <hr class="my-4">

            <h4 class="mb-3">Funcionalidades:</h4>
            
            <!-- Carousel -->
            <div id="carouselExampleCaptions" class="carousel slide carousel-fade shadow rounded" data-bs-ride="carousel">
                
                <!-- Indicadores (Bolinhas na parte inferior) -->
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
                    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
                    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="3" aria-label="Slide 4"></button>
                </div>

                <!-- Slides (Itens do Carrossel) -->
                <div class="carousel-inner rounded">
                    
                    <!-- Item 1: Criação (Verde/Success) -->
                    <div class="carousel-item active bg-success text-white" style="height: 400px;">
                        <div class="d-flex flex-column justify-content-center align-items-center h-100">
                            <!-- SVG Criação -->
                            <svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" fill="currentColor" class="bi bi-clipboard2-plus mb-3" viewBox="0 0 16 16">
                                <path d="M9.5 0a.5.5 0 0 1 .5.5.5.5 0 0 0 .5.5.5.5 0 0 1 .5.5V2a.5.5 0 0 1-.5.5h-5A.5.5 0 0 1 5 2v-.5a.5.5 0 0 1 .5-.5.5.5 0 0 0 .5-.5.5.5 0 0 1 .5-.5z"/>
                                <path d="M3 2.5a.5.5 0 0 1 .5-.5H4a.5.5 0 0 0 0-1h-.5A1.5 1.5 0 0 0 2 2.5v12A1.5 1.5 0 0 0 3.5 16h9a1.5 1.5 0 0 0 1.5-1.5v-12A1.5 1.5 0 0 0 12.5 1H12a.5.5 0 0 0 0 1h.5a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5z"/>
                                <path d="M8.5 6.5a.5.5 0 0 0-1 0V8H6a.5.5 0 0 0 0 1h1.5v1.5a.5.5 0 0 0 1 0V9H10a.5.5 0 0 0 0-1H8.5z"/>
                            </svg>
                            <div class="carousel-caption d-none d-md-block">
                                <h3 class="fw-bold">Criação de Tarefas</h3>
                                <p>Adicione novas tarefas rapidamente para manter sua rotina organizada.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Item 2: Edição (Azul/Primary) -->
                    <div class="carousel-item bg-primary text-white" style="height: 400px;">
                        <div class="d-flex flex-column justify-content-center align-items-center h-100">
                            <!-- SVG Edição -->
                            <svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" fill="currentColor" class="bi bi-file-earmark-code mb-3" viewBox="0 0 16 16">
                                <path d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5z"/>
                                <path d="M8.646 6.646a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L10.293 9 8.646 7.354a.5.5 0 0 1 0-.708m-1.292 0a.5.5 0 0 0-.708 0l-2 2a.5.5 0 0 0 0 .708l2 2a.5.5 0 0 0 .708-.708L5.707 9l1.647-1.646a.5.5 0 0 0 0-.708"/>
                            </svg>
                            <div class="carousel-caption d-none d-md-block">
                                <h3 class="fw-bold">Edição Flexível</h3>
                                <p>Atualize detalhes, corrija informações e mantenha tudo em dia.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Item 3: Busca (Escuro/Dark) -->
                    <div class="carousel-item bg-dark text-white" style="height: 400px;">
                        <div class="d-flex flex-column justify-content-center align-items-center h-100">
                            <!-- SVG Busca -->
                            <svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" fill="currentColor" class="bi bi-terminal-fill mb-3" viewBox="0 0 16 16">
                                <path d="M0 3a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm9.5 5.5h-3a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1m-6.354-.354a.5.5 0 1 0 .708.708l2-2a.5.5 0 0 0 0-.708l-2-2a.5.5 0 1 0-.708.708L4.793 6.5z"/>
                            </svg>
                            <div class="carousel-caption d-none d-md-block">
                                <h3 class="fw-bold">Busca e Controle</h3>
                                <p>Encontre qualquer registro usando nosso terminal de busca integrado.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Item 4: Exclusão (Vermelho/Danger) -->
                    <div class="carousel-item bg-danger text-white" style="height: 400px;">
                        <div class="d-flex flex-column justify-content-center align-items-center h-100">
                            <!-- SVG Exclusão -->
                            <svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" fill="currentColor" class="bi bi-trash-fill mb-3" viewBox="0 0 16 16">
                                <path d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5M8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5m3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0"/>
                            </svg>
                            <div class="carousel-caption d-none d-md-block">
                                <h3 class="fw-bold">Limpeza e Exclusão</h3>
                                <p>Remova itens desnecessários com segurança para manter o sistema limpo.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Botões de Navegação -->
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Anterior</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Próximo</span>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- BOTÃO DE CRIAÇÃO -->
<div class="d-flex justify-content-center my-5">
    <button
        class="btn btn-outline-primary btn-lg px-5 d-flex align-items-center gap-2"
        data-bs-toggle="modal"
        data-bs-target="#modalCriarTarefa"
    >
        <i class="bi bi-plus-lg"></i>
        Nova Tarefa
    </button>
</div>

<!-- MODAL -->
<div class="modal fade" id="modalCriarTarefa" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title">Criar Nova Tarefa</h5>
                <button class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>

            <form method="POST"
                    action="{% url 'adicionar_task' %}"
                    class="needs-validation"
                    novalidate>
                {% csrf_token %}

                <div class="modal-body">

                    <div class="mb-3">
                        <label class="form-label">Título</label>
                        <input type="text" name="titulo" class="form-control" required>
                        <div class="invalid-feedback">Título obrigatório</div>
                        <div class="valid-feedback">Título válido</div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Descrição</label>
                        <textarea name="descricao"
                                    class="form-control"
                                    rows="3"
                                    required></textarea>
                        <div class="invalid-feedback">Descrição obrigatória</div>
                        <div class="valid-feedback">Descrição válida</div>
                    </div>

                </div>

                <div class="modal-footer">
                    <button type="button"
                            class="btn btn-outline-danger"
                            data-bs-dismiss="modal">
                        Cancelar
                    </button>
                    <button type="submit"
                            class="btn btn-outline-success">
                        Criar Tarefa
                    </button>
                </div>

            </form>

        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
(() => {
    // validação do formulário
    'use strict'

    const form = document.querySelector('.needs-validation')
    const fields = form.querySelectorAll('input, textarea')

    fields.forEach(field => {
        field.addEventListener('input', () => {
            if (field.checkValidity()) {
                field.classList.add('is-valid')
                field.classList.remove('is-invalid')
            } else {
                field.classList.add('is-invalid')
                field.classList.remove('is-valid')
            }
        })
    })

    form.addEventListener('submit', event => {
        if (!form.checkValidity()) {
            event.preventDefault()
            event.stopPropagation()
        }
        form.classList.add('was-validated')
    })
})()

// balão do canto da tela de  sucesso ou erro ao criar tarefa
    document.addEventListener('DOMContentLoaded', () => {
        // Seleciona todos os elementos com a classe 'toast'
        const toastElList = document.querySelectorAll('.toast');
        
        // Inicializa e mostra cada um
        const toastList = [...toastElList].map(toastEl => {
            const toast = new bootstrap.Toast(toastEl, { delay: 5000 }); // some em 5 segundos
            toast.show();
            return toast;
        });
    });

</script>
{% endblock %}

